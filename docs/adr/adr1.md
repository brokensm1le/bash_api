# Title. ADR1: метод создания параллельных задач и метод их остановки

### Context

Мы имеем БД с bash скриптами, нам необходимо их запускать и останавливать. Также сохранять результаты выполнения этих скриптов.


### Decision

Мы будем каждый запуск bash скрипта делать в отдельной *goroutine*, пропихивая в неё *context*, а для остановки выполнения 
мы сделаем от context - *cancel function*. Будем хранить её в cancel *map*-е с ключом *runID*.


### Status
Принято.

### Consequences
То есть при каждом вызове запуска bash скрипта происходит:

1. Создаем запись в БД ```results```. О запуске скрипта (статус **Running**) и получаем ```runId```
2. Создаем context с *cancel function* и добавляем эту функцию в ```cancelMap``` с ключом ```runId```.
3. Дальше создаем *goroutine*. Дальше она действует самостоятельно:
   - Создаем файл с bash скриптом
   - Запускаем скрипт
   - Записываем результат
   - Меняем статус на **Success**
4. Возвращаем ```runId```
5. (Optional) Если нужно остановить выполнение скрипта. Мы достаем *cancel function* из ```cancelMap``` и меняем статус в БД на **Canceled**.

